
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Users Collection:
    // - Allow users to create their own user document on sign-up.
    // - Allow authenticated users to read and write ONLY their own document.
    // - Deny all other access.
    match /users/{userId} {
      allow read, update, delete: if request.auth != null && request.auth.uid == userId;
      allow create: if request.auth != null;
    }

    // Default deny all other collections for now
    // As you build out features like the marketplace, add rules here.
    // For example:
    // match /marketListings/{listingId} {
    //   allow read: if request.auth != null; // All authenticated users can read listings
    //   allow create: if request.auth != null; // All authenticated users can create
    //   allow update, delete: if request.auth != null && resource.data.farmerId == request.auth.uid; // Only the owner can edit/delete
    // }
  }
}

    